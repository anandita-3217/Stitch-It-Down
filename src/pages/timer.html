<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer | Stitch It Down</title>
</head>
<body>
    <div class="logo-container">
        <div class="theme-toggle">
        <label class="switch">
                    <input type="checkbox" id="themeToggle" />
                    <span class="slider"></span>
                    <span class="clouds_stars"></span>
        </label>
        </div>
    </div>
    <div class="timer-container work">
        <!-- Progress Ring -->
        <div class="progress-ring">
            <svg width="280" height="280">
                <circle
                    class="progress-ring-background"
                    cx="140"
                    cy="140"
                    r="130"
                    fill="transparent"
                    stroke="#e6e6e6"
                    stroke-width="8"
                />
                <circle
                    class="progress-ring-progress"
                    cx="140"
                    cy="140"
                    r="130"
                    fill="transparent"
                    stroke="#4CAF50"
                    stroke-width="8"
                    stroke-linecap="round"
                    transform="rotate(-90 140 140)"
                />
            </svg>
            
            <!-- Timer Display -->
            <div class="timer-display">
                <div id="timeDisplay" class="time">25:00</div>
                <div id="sessionType" class="session-type">Focus Time</div>
                <div class="session-counter">
                    Session <span id="sessionCount">1</span>
                </div>
            </div>
        </div>
        
        <!-- Stitch Character -->
        <div class="stitch-container">
            <img id="stitchTimer"  alt="Stitch" class="stitch-character">
            <div class="speech-bubble">
                <div id="stitchSpeech">Let's get productive!</div>
            </div>
        </div>
        
        <!-- Session Selection -->
        <div class="session-controls">
            <button class="session-btn active" data-type="work" data-duration="25">
                <span class="session-icon">üéØ</span>
                <span class="session-label">Focus</span>
            </button>
            <button class="session-btn" data-type="short" data-duration="5">
                <span class="session-icon">‚òï</span>
                <span class="session-label">Short Break</span>
            </button>
            <button class="session-btn" data-type="long" data-duration="15">
                <span class="session-icon">üèñÔ∏è</span>
                <span class="session-label">Long Break</span>
            </button>
        </div>
        
        <!-- Timer Controls -->
        <div class="timer-controls">
            <button id="startPauseBtn" class="control-btn primary pulse">
                <span class="btn-icon">‚ñ∂</span>
                <span class="btn-text">Start</span>
            </button>
            
            <button id="resetBtn" class="control-btn secondary">
                <span class="btn-icon">‚Üª</span>
                <span class="btn-text">Reset</span>
            </button>
            
            <button id="skipBtn" class="control-btn secondary">
                <span class="btn-icon">‚è≠</span>
                <span class="btn-text">Skip</span>
            </button>
        </div>
        
        <!-- Settings Panel -->
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-header">
                <h3>Timer Settings</h3>
                <button id="closeSettings" class="close-btn">&times;</button>
            </div>
            
            <div class="settings-content">
                <div class="setting-group">
                    <label for="workDuration">Work Duration (minutes)</label>
                    <input type="range" id="workDuration" min="1" max="60" value="25">
                    <span id="workValue">25</span>
                </div>
                
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="autoStart"> Auto-start breaks and sessions
                    </label>
                </div>
                
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="soundNotifications" checked> Sound notifications
                    </label>
                </div>
            </div>
        </div>
        
        <!-- Settings Toggle -->
        <button id="settingsToggle" class="settings-toggle">
            <span class="settings-icon">‚öôÔ∏è</span>
        </button>
        
        <!-- Stats Display -->
        <div class="stats-mini">
            <div class="stat-item">
                <span class="stat-label">Today</span>
                <span id="todayPomodoros" class="stat-value">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Time</span>
                <span id="totalTime" class="stat-value">0h 0m</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Streak</span>
                <span id="streak" class="stat-value">0</span>
            </div>
        </div>
        
        <!-- Motivation Text -->
        <div id="motivationText" class="motivation-text">
            Focus on your ohana! üå∫
        </div>
    </div>
    
    <!-- Error boundary for development -->
    <div id="errorBoundary" style="display: none;">
        <h2>Something went wrong</h2>
        <p>The timer encountered an error. Check the console for details.</p>
        <button onclick="location.reload()">Reload Page</button>
    </div>
    
    <!-- Load the timer renderer script -->
    <script>
        // Global error handler
        window.addEventListener('error', (e) => {
            console.error('Global error:', e.error);
            document.getElementById('errorBoundary').style.display = 'block';
        });
        
        window.addEventListener('unhandledrejection', (e) => {
            console.error('Unhandled promise rejection:', e.reason);
        });
    </script>
</body>
</html>